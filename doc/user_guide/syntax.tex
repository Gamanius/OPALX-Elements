\input{header}

\chapter{OPAL Language Syntax}
\label{chp:syntax}
\index{Syntax|(}
Words in \textit{italic font} are syntactic entities, and characters in
\texttt{monospaced font} must be entered as shown.
Comments are given in \textbf{bold font}.

\section*{Statements:}
\begin{tabular}{p{4cm}cl}
\textit{comment}
  &:& \texttt{//} \textit{anything-except-newline} \\
  &\texttt{|}& \texttt{/*} \textit{anything-except-}\texttt{*/} \texttt{*/}
\end{tabular}
\\
\begin{tabular}{p{4cm}cl}
\textit{identifier}
  &:& \texttt{[a-zA-Z][a-zA-Z0-9-]}
\end{tabular}
\\
\begin{tabular}{p{4cm}cl}
\textit{integer}
  &:& \texttt{[0-9]+}
\end{tabular}
\\
\begin{tabular}{p{4cm}cl}
\textit{string}
  &:& \texttt{'}\textit{anything-except-single-quote}\texttt{'} \\
  &\texttt{|}& \texttt{"}anything-except-double-quote\texttt{"}
\end{tabular}
\\
\begin{tabular}{p{4cm}cl}
\textit{command}
  &:& \textit{keyword} \textit{attribute-list} \\
  &\texttt{|}& \textit{label} \texttt{:} \textit{keyword} \textit{attribute-list}
\end{tabular}
\\
\begin{tabular}{p{4cm}cl}
\textit{keyword}
  &:& \textit{identifier}
\end{tabular}
\\
\begin{tabular}{p{4cm}cl}
\textit{label}
  &:& \textit{identifier}
\end{tabular}
\\
\begin{tabular}{p{4cm}cl}
\textit{attribute-list}
  &:& \textit{empty} \\
  &\texttt{|}& \textit{attribute-list} \texttt{,} \textit{attribute}
\end{tabular}
\\
\begin{tabular}{p{4cm}cl}
\textit{attribute}
  &:& \textit{attribute-name} \textbf{// only for logical attribute} \\
  &\texttt{|}& \textit{attribute-name} \texttt{=} \textit{attribute-value}
    \\
 & &\textbf{// expression evaluated} \\
  &\texttt{|}& \textit{attribute-name} \texttt{:=} \textit{attribute-value} \\
 & &\textbf{// expression retained}
\end{tabular}
\\
\begin{tabular}{p{4cm}cl}
\textit{attribute-name}
  &:& \textit{identifier}
\end{tabular}
\\
\begin{tabular}{p{4cm}cl}
\textit{attribute-value}
  &:& \textit{string-expression} \\
  &\texttt{|}& \textit{logical-expression} \\
  &\texttt{|}& \textit{real-expression} \\
  &\texttt{|}& \textit{array-expression} \\
  &\texttt{|}& \textit{constraint} \\
  &\texttt{|}& \textit{variable-reference} \\
  &\texttt{|}& \textit{place} \\
  &\texttt{|}& \textit{range} \\
  &\texttt{|}& \textit{token-list} \\
  &\texttt{|}& \textit{token-list-array} \\
  &\texttt{|}& \textit{regular-expression}
\end{tabular}

\section*{Real expressions:}
\begin{tabular}{p{4cm}cl}
\textit{real-expression}
  &:& \textit{real-term} \\
  &\texttt{|}& \texttt{+} \textit{real-term} \\
  &\texttt{|}& \texttt{-} \textit{real-term} \\
  &\texttt{|}& \textit{real-expression} \texttt{+} \textit{real-term} \\
  &\texttt{|}& \textit{real-expression} \texttt{-} \textit{real-term}
\end{tabular}
\\
\begin{tabular}{p{4cm}cl}
\textit{real-term}
  &:& \textit{real-factor} \\
  &\texttt{|}& \textit{real-term} \texttt{*} \textit{real-factor} \\
  &\texttt{|}& \textit{real-term} \texttt{/} \textit{real-factor}
\end{tabular}
\\
\begin{tabular}{p{4cm}cl}
\textit{real-factor}
  &:& \textit{real-primary} \\
  &\texttt{|}& \textit{real-factor} \texttt{\^{}} \textit{real-primary}
\end{tabular}
\\
\begin{tabular}{p{4cm}cl}
\textit{real-primary}
  &:& \textit{real-literal} \\
  &\texttt{|}& \textit{symbolic-constant} \\
  &\texttt{|}& \texttt{\#} \\
  &\texttt{|}& \textit{real-name} \\
  &\texttt{|}& \textit{array} \texttt{[} \textit{index} \texttt{]} \\
  &\texttt{|}& \textit{object-name} \texttt{->} \textit{real-attribute} \\
  &\texttt{|}& \textit{object-name} \texttt{->} \textit{array-attribute}
    \texttt{[} \textit{index} \texttt{]} \\
  &\texttt{|}& \textit{table-reference} \\
  &\texttt{|}& \textit{real-function} \texttt{()} \\
  &\texttt{|}& \textit{real-function} \texttt{(} \textit{real-expression}
    \texttt{)} \\
  &\texttt{|}& \textit{real-function} \texttt{(} \textit{real-expression}
    \texttt{,} \textit{real-expression} \texttt{)} \\
  &\texttt{|}& \textit{function-of-array}
    \texttt{(} \textit{array-expression} \texttt{)} \\
  &\texttt{|}& \texttt{(} \textit{real-expression} \texttt{)}
\end{tabular}
\\
\begin{tabular}{p{4cm}cl}
\textit{real-function}
  &:& \keyword{RANF} \\
  &\texttt{|}& \keyword{GAUSS} \\
%  &\texttt{|}& \keyword{USER0} \\
%  &\texttt{|}& \keyword{SI} \\
 % &\texttt{|}& \keyword{SC} \\
 % &\texttt{|}& \keyword{SO} \\
  &\texttt{|}& \keyword{ABS} \\
  &\texttt{|}& \keyword{TRUNC} \\
  &\texttt{|}& \keyword{ROUND} \\
  &\texttt{|}& \keyword{FLOOR} \\
  &\texttt{|}& \keyword{CEIL} \\
  &\texttt{|}& \keyword{SIGN} \\
  &\texttt{|}& \keyword{SQRT} \\
  &\texttt{|}& \keyword{LOG} \\
  &\texttt{|}& \keyword{EXP} \\
  &\texttt{|}& \keyword{SIN} \\
  &\texttt{|}& \keyword{COS} \\
  &\texttt{|}& \keyword{ABS} \\
  &\texttt{|}& \keyword{TAN} \\
  &\texttt{|}& \keyword{ASIN} \\
  &\texttt{|}& \keyword{ACOS} \\
  &\texttt{|}& \keyword{ATAN} \\
%  &\texttt{|}& \keyword{TGAUSS} \\
%  &\texttt{|}& \keyword{USER1} \\
  &\texttt{|}& \keyword{ATAN2} \\
  &\texttt{|}& \keyword{MAX} \\
  &\texttt{|}& \keyword{MIN} \\
  &\texttt{|}& \keyword{MOD} \\
  &\texttt{|}& \keyword{POW} \\
 % &\texttt{|}& \keyword{USER2}
\end{tabular}
\\
\begin{tabular}{p{4cm}cl}
\textit{function-of-array}
  &:& \keyword{VMIN} \\
  &\texttt{|}& \keyword{VMAX} \\
  &\texttt{|}& \keyword{VRMS} \\
  &\texttt{|}& \keyword{VABSMAX}
\end{tabular}

\section*{Real variables and constants:}
\begin{tabular}{p{4cm}cl}
\textit{real-prefix}
  &:& empty \\
  &\texttt{|}& \keyword{REAL} \\
  &\texttt{|}& \keyword{REAL CONST} \\
  &\texttt{|}& \keyword{CONST}
\end{tabular}
\\
\begin{tabular}{p{4cm}cl}
\textit{real-definition}
  &:& \textit{real-prefix} \textit{real-name} \texttt{=}
    \textit{real-expression} \\
 & &\textbf{// expression evaluated} \\
  &\texttt{|}& \textit{real-prefix} \textit{real-name} \texttt{:=}
    \textit{real-expression} \\
 & &\textbf{// expression retained}
\end{tabular}
\\
\begin{tabular}{p{4cm}cl}
\textit{symbolic-constant}
  &:& \keyword{PI} \\
  &\texttt{|}& \keyword{TWOPI}  \\
  &\texttt{|}& \keyword{DEGRAD} \\
  &\texttt{|}& \keyword{RADDEG} \\
  &\texttt{|}& \keyword{E} \\
  &\texttt{|}& \keyword{EMASS} \\
  &\texttt{|}& \keyword{PMASS} \\
  &\texttt{|}& \keyword{HMMASS} \\
  &\texttt{|}& \keyword{UMASS} \\
    &\texttt{|}& \keyword{CMASS} \\
    &\texttt{|}& \keyword{MMASS} \\
    &\texttt{|}& \keyword{DMASS} \\
    &\texttt{|}& \keyword{XEMASS} \\
  &\texttt{|}& \keyword{CLIGHT} \\
  &\texttt{|}& \textit{real-name}
\end{tabular}
\\
\begin{tabular}{p{4cm}cl}
\textit{real-name}
  &:& \textit{identifier}
\end{tabular}
\\
\begin{tabular}{p{4cm}cl}
\textit{object-name}
  &:& \textit{identifier}
\end{tabular}
\\
%\begin{tabular}{p{4cm}cl}
%\textit{table-reference}
%  &:& \textit{table-name} \texttt{@} \textit{place} \texttt{->}
 %   \textit{column-name}
%\end{tabular}
\\
\begin{tabular}{p{4cm}cl}
\textit{table-name}
  &:& \textit{identifier}
\end{tabular}
\\
\begin{tabular}{p{4cm}cl}
\textit{column-name}
  &:& \textit{identifier}
\end{tabular}

\section*{Logical expressions:}
\begin{tabular}{p{4cm}cl}
\textit{logical-expression}
  &:& \textit{and-expression} \\
  &\texttt{|}& \textit{logical-expression} \texttt{||} \textit{and-expression}
\end{tabular}
\\
\begin{tabular}{p{4cm}cl}
\textit{and-expression}
  &:& \textit{relation} \\
  &\texttt{|}& \textit{and-expression} \texttt{\&\&} \textit{relation}
\end{tabular}
\\
\begin{tabular}{p{4cm}cl}
\textit{relation}
  &:& \textit{logical-name} \\
  &\texttt{|}& \keyword{TRUE} \\
  &\texttt{|}& \keyword{FALSE} \\
  &\texttt{|}& \textit{real-expression} \textit{relation-operator}
    \textit{real-expression}
\end{tabular}
\\
\begin{tabular}{p{4cm}cl}
\textit{logical-name}
  &:& \textit{identifier}
\end{tabular}
\\
\begin{tabular}{p{4cm}cl}
\textit{relation-operator}
  &:& \texttt{==} \\
  &\texttt{|}& \texttt{!=} \\
  &\texttt{|}& \texttt{<} \\
  &\texttt{|}& \texttt{>} \\
  &\texttt{|}& \texttt{>=} \\
  &\texttt{|}& \texttt{<=}
\end{tabular}

\section*{Logical variables:}
\begin{tabular}{p{4cm}cl}
\textit{logical-prefix}
  &:& \keyword{BOOL} \\
  &\texttt{|}& \keyword{BOOL CONST}
\end{tabular}
\\
\begin{tabular}{p{4cm}cl}
\textit{logical-definition}
  &:& \textit{logical-prefix} \textit{logical-name} \texttt{=}
    \textit{logical-expression} \\
 & &\textbf{// expression evaluated} \\
  &\texttt{|}& \textit{logical-prefix} \textit{logical-name \texttt{:=}}
    \textit{logical-expression} \\
 & &\textbf{// expression retained}
\end{tabular}
\\
\begin{tabular}{p{4cm}cl}
\end{tabular}

\section*{String expressions:}
\begin{tabular}{p{4cm}cl}
\textit{string-expression}
  &:& \textit{string} \\
  &\texttt{|}& \textit{identifier} \textbf{// taken as a string} \\
  &\texttt{|}& \textit{string-expression} \texttt{\&} \textit{string}
\end{tabular}

\section*{String constants:}
\begin{tabular}{p{4cm}cl}
\textit{string-prefix}
  &:& \keyword{STRING}
\end{tabular}
\\
\begin{tabular}{p{4cm}cl}
\textit{string-definition}
  &:& \textit{string-prefix} \textit{string-name} \texttt{=}
    \textit{string-expression} \\
 & &\textbf{// expression evaluated} \\
  &\texttt{|}& \textit{string-prefix} \textit{string-name} \texttt{:=}
    \textit{string-expression} \\
 & &\textbf{// expression retained}
\end{tabular}

\section*{Real array expressions:}
\begin{tabular}{p{4cm}cl}
\textit{array-expression}
  &:& \textit{array-term} \\
  &\texttt{|}& \texttt{+} \textit{array-term} \\
  &\texttt{|}& \texttt{-} \textit{array-term} \\
  &\texttt{|}& \textit{array-expression} \texttt{+} \textit{array-term} \\
  &\texttt{|}& \textit{array-expression} \texttt{-} \textit{array-term}
\end{tabular}
\\
\begin{tabular}{p{4cm}cl}
\textit{array-term}
  &:& \textit{array-factor} \\
  &\texttt{|}& \textit{array-term} \texttt{*} \textit{array-factor} \\
  &\texttt{|}& \textit{array-term} \texttt{/} \textit{array-factor}
\end{tabular}
\\
\begin{tabular}{p{4cm}cl}
\textit{array-factor}
  &:& \textit{array-primary} \\
  &\texttt{|}& \textit{array-factor} \texttt{\^{}} \textit{array-primary}
\end{tabular}
\\
\begin{tabular}{p{4cm}cl}
\textit{array-primary}
  &:& \texttt{\{} \textit{array-literal} \texttt{\}} \\
  &\texttt{|}& \textit{array-reference} \\
%  &\texttt{|}& \textit{table-generator} \\
%  &\texttt{|}& \textit{row-reference} \\
%  &\texttt{|}& \textit{column-reference} \\
  &\texttt{|}& \textit{real-function}
    \texttt{(} \textit{array-expression} \texttt{)} \\
  &\texttt{|}& \texttt{(} \textit{array-expression} \texttt{)}
\end{tabular}
\\
%  \begin{tabular}{p{4cm}cl}
%  \textit{table-generator}
%    &\texttt{|}& \texttt{TABLE} \texttt{(} \textit{last} \texttt{,}
%      \textit{real-expression} \texttt{)} \\
%    &:& \texttt{TABLE} \texttt{(} \textit{first} \texttt{:}
%      \textit{last} \texttt{,} \textit{real-expression} \texttt{)} \\
%    &:& \texttt{TABLE} \texttt{(} \textit{first} \texttt{:}
%      \textit{last} \texttt{:} \textit{step} \texttt{,}
%      \textit{real-expression} \texttt{)}
%  \end{tabular}
%  \\
%  \begin{tabular}{p{4cm}cl}
%  \textit{first}
%    &:& \textit{integer}
%  \end{tabular}
%  \\
%  \begin{tabular}{p{4cm}cl}
%  \textit{last}
%    &:& \textit{integer}
%  \end{tabular}
%  \\
%\begin{tabular}{p{4cm}cl}
%\textit{step}
%  &:& \textit{integer}
%\end{tabular}
%\\
%\begin{tabular}{p{4cm}cl}
%\textit{table-row}
%  &:& \textit{table-name} \texttt{@} \textit{place}
%\end{tabular}
%\\
%\begin{tabular}{p{4cm}cl}
%\textit{row-reference}
%  &:& \texttt{ROW} \texttt{(} \textit{table-name} \texttt{,}
%    \textit{place} \texttt{)} \texttt{|} \\
%  &\texttt{|}& \keyword{ROW} \texttt{(} \textit{table-name} \texttt{,}
%    \textit{place} \texttt{, \{} \textit{column-list} \texttt{\})}
%\end{tabular}
%\\
%\begin{tabular}{p{4cm}cl}
%\textit{column-reference}
%  &:& \keyword{COLUMN} \texttt{(} \textit{table-name} \texttt{,}
%    \textit{column-name} \texttt{)} \\
%  &\texttt{|}& \keyword{COLUMN} \texttt{(} \textit{table-name} \texttt{,}
%    \textit{column-name} \texttt{,} \textit{range} \texttt{)}
%\end{tabular}
%\\
%\begin{tabular}{p{4cm}cl}
%\textit{column-list}
%  &:& \textit{column-name} \\
%  &\texttt{|}& \textit{column-list} \texttt{,} \textit{column-name}
%\end{tabular}
%\\
\begin{tabular}{p{4cm}cl}
\textit{array-literal}
  &:& \textit{real-expression} \\
  &\texttt{|}& \textit{array-literal} \texttt{,} \textit{real expression}
\end{tabular}
\\
\begin{tabular}{p{4cm}cl}
\textit{array-reference}
  &:& \textit{array-name} \\
  &\texttt{|}& \textit{object-name} \texttt{->} \textit{array-attribute}
\end{tabular}
\\
\begin{tabular}{p{4cm}cl}
\textit{array-name}
  &:& \textit{identifier}
\end{tabular}

\section*{Real array definitions:}
\begin{tabular}{p{4cm}cl}
\textit{array-prefix}
  &:& \keyword{REAL VECTOR}
\end{tabular}
\\
\begin{tabular}{p{4cm}cl}
\textit{array-definition}
  &:& \textit{array-prefix} \textit{array-name} \texttt{=}
    \textit{array-expression} \\
  &\texttt{|}& \textit{array-prefix} \textit{array-name} \texttt{:=}
    \textit{array-expression}
\end{tabular}
\\
\begin{tabular}{p{4cm}cl}
\end{tabular}

\section*{Constraints:}
\begin{tabular}{p{4cm}cl}
\textit{constraint}
  &:& \textit{array-expression} \textit{constraint-operator}
    \textit{array-expression}
\end{tabular}
\\
\begin{tabular}{p{4cm}cl}
\textit{constraint-operator}
  &:& \texttt{==} \\
  &\texttt{|}& \texttt{<} \\
  &\texttt{|}& \texttt{>}
\end{tabular}

\section*{Variable references:}
\begin{tabular}{p{4cm}cl}
\textit{variable-reference}
  &:& \textit{real-name} \\
  &\texttt{|}& \textit{object-name} \texttt{->} \textit{attribute-name}
\end{tabular}

%\section*{Places:}
%\begin{tabular}{p{4cm}cl}
%\textit{place}
%  &:& \textit{element-name} \\
%  &\texttt{|}& \textit{element-name} \texttt{[} \textit{integer} \texttt{]} \\
%  &\texttt{|}& \keyword{\#S} \\
%  &\texttt{|}& \keyword{\#E} \\
%  &\texttt{|}& \texttt{\#}{integer} \\
%  &\texttt{|}& \textit{line-name} \texttt{::} \textit{place}
%\end{tabular}
%
%\section*{Ranges:}
%\begin{tabular}{p{4cm}cl}
%\textit{range}
%  &:& \textit{place} \\
%  &\texttt{|}& \textit{place} \texttt{/} \textit{place}
%\end{tabular}

\section*{Token lists:}
\begin{tabular}{p{4cm}cl}
\textit{token-list}
  &:& \textit{anything-except-comma}
\end{tabular}
\\
\begin{tabular}{p{4cm}cl}
\textit{token-list-array}
  &:& \textit{token-list} \\
  &\texttt{|}& \textit{token-list-array} \texttt{,} \textit{token-list}
\end{tabular}

\section*{Regular expressions:}
\begin{tabular}{p{4cm}cl}
\textit{regular-expression}
  &:& \texttt{"}\textit{UNIX-regular-expression}\texttt{"}
\end{tabular}
\index{Syntax|)}

\input{footer}