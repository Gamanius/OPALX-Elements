\input{header}

\chapter{Changelog}
\label{chp:changelog}

Since \opal\ moved to {\tt gitlab} visit \url{https://gitlab.psi.ch/OPAL/src/wikis/OPALReleaseNotes} for the latest release notes.


\section{Changes in \opal Version 1.3.0}
\subsection{Cyclotron Element}
In order to accommodate axial injection through a spiral inflector, the Cyclotron element has been updated with
a z coordinate and a pz for the reference particle (\keyword{ZINIT}, \keyword{PZINIT}).

\subsection{AMG Solver}
The AMG Solver (including arbitrary boundary condition) is enabled per default.

\subsection{Variable Frequency RF}
Variable frequency RF is now available in \opalcycl mode when using the
\keyword{RINGDEFINITION} as described in
\secref{variable-rf-cavity-cycl}. A new \keyword{LOCAL\_CARTESIAN\_OFFSET}
element is introduced to enable overlapping elements in the
\keyword{RINGDEFINITION}, described in \secref{ringdefinition}.

\subsection{Appendix}
Two new Appendices,  \appref{benchmarks} with Benchmarks (TRANSPORT, TRACE3D and IMPACT-T) and in \appref{autophasing} a description of the auto phasing mechanism in \opalt and \opalenv is available.

\subsection{Unit Tests}
Parts of \opal can be tested using unit tests, details can be found in \chpref{unittest}

\section{Changes in \opal Version 1.2.0}
\subsection{Distribution}
The distribution class is totally rewritten. You have to indicate the units to be used for $p_x,p_y$ and $p_z$ with the
new argument \keyword{INPUTMOUNITS}. At the moment electron volt (\keyword{EV}) or $\beta\gamma$ (\keyword{NONE} which is default) are available.
\begin{Verbatim}[label={My orange command sample output}]
Dist1:DISTRIBUTION, TYPE = GAUSS,
                    SIGMAX = 1.e-03,
                    SIGMAPX = 1.0,
                    CORRX = 0.0,
                    SIGMAY = 1.e-03,
                    SIGMAPY = 1.0,
                    CORRY = 0.0,
                    SIGMAT = 2.e-3 ,
                    INPUTMOUNITS = EV;
\end{Verbatim}
An hands-on example is given in \secref{oldtonewdist}. Furthermore the \keyword{PC} argument of the \keyword{BEAM} command defines the mean energy of the generated distribution. The attributes \keyword{PZ} and \keyword{PT} are no longer supported. The full
correlation matrix $\mathbf\sigma$ can be defined for the \keyword{GAUSS} distribution.

\subsection{\keywordinheader{SBEND} and \keywordinheader{RBEND}}
The elements \keyword{SBEND} and \keyword{RBEND} for \opalt have also been rewritten. (See \secref{bend} for a
full description.) If you have input files with an \keyword{SBEND} or \keyword{RBEND} already defined, here are the key
changes you must make for those definitions to work properly:

\begin{enumerate}
\item All angles are now specified in radians.
\item Energy units for the bend reference particle are now specified in eV.
\item For bend definitions that use your own, custom field map, \emph{do not specify the bend length, \keyword{L}}.
\end{enumerate}

\subsection{Misalignment}
The misalignment argument \keyword{DZ}, misalignment in z direction is no longer supported, instead use \keyword{ELEMEDGE}.

\subsection{New elements: \keywordinheader{SBend3D} \& \keywordinheader{RINGDEFINITION}}

\keyword{SBend3D} \seessec{SBend3D} \& \keyword{RingDefinition} \seesec{ringdefinition} adding FFAG and more general Ring modeling capabilities.

\subsection{Space Charge Solver}
Still in an experimental stage, two iterative solvers can be enabled \seechp{installation}. With both solvers the exact boundary conditions
cab be applied.  Per default and in the binary distribution the solvers are disabled. We are working on regression tests and plan to have them ready in Version 1.2.1.

\input{footer}
